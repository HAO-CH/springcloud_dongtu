
<!DOCTYPE HTML>
<html xmlns:th="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8" />
<title>会员中心-旅游景点旅行社网站</title>
<meta name="renderer" content="webkit">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
<meta name="generator" content=""  data-variable="https://breeze.cn/muban/M1156012/359/|cn||||M1156012" />
<link rel="stylesheet" type="text/css" href="/static/css/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="/static/css/font-awesome.min.css" />
<link rel="stylesheet" type="text/css" href="/static/css/lo.css" />
<link rel="stylesheet" type="text/css" href="/static/css/bootstrap.min.css" />

</head>
<style>
.met-member{ background-color:;}
.login_index{ background-color:;  }
</style>
<link rel="shortcut icon" href="bitbug_favicon.ico"/>
<link rel="stylesheet" type="text/css" href="/css/style.css" />
<link rel="stylesheet" type="text/css" href="/css/global.css" />

<script type="text/javascript" src="/jquery-1.7.2.min.js"></script>
<style>
	a{
		color:red;
	}
	.disable{
		pointer-events:none;
		color:#666;
	}
</style>
<script type="text/javascript">
    $(function(){
        // 导航
        $(".nav>ul>li").mouseenter(function(event) {
            $(this).addClass("cur").siblings().removeClass("cur")
            $(this).children(".yincang").stop().slideDown()

        });
        $(".nav>ul>li").mouseleave(function(event) {
            $(this).removeClass("cur")
            $(this).children(".yincang").stop().slideUp()
        });
        // tejia
        $(".tejia .wenzi span").mouseenter(function(event) {
           $(this).addClass("cur").siblings().removeClass("cur")
        });
        // 品牌目的地
        $(".pinpai_inr ul li").mouseenter(function(event) {
            $(this).addClass("cur").siblings().removeClass("cur")
        });
          $(".pinpai_inr ul li").mouseleave(function(event) {
            $(".pinpai_inr ul li").removeClass("cur")
        });
         // 
         $(".tututu").mouseenter(function(event) {
             $(this).children(".heibu").stop().slideDown()
         });
         $(".tututu").mouseleave(function(event) {
             $(this).children(".heibu").stop().slideUp()
         });
        //banner
                var nowing = 0 
                var $imglis = $(".banner .list0 li")
                var $fadeCover = $(".fadeCover")
                var fadeIntime = 500
                var fadeOutime = 800
                var $circle = $(".circle li")
                var timer

                    // 定义函数
                    function rightbtn(){
                        // 先信号量的改变，
                    
                    nowing++
                    if(nowing>$imglis.length-1){
                        nowing=0
                       }
                       // 再调用函数
                    dong();
                    }
                    // 定时器业务
                     timer = setInterval(rightbtn,2000)
                    $(".banner").mouseenter(function(){
                        clearInterval(timer)
                    
                    })
                    $(".banner").mouseleave(function(){
                        clearInterval(timer)
                        timer = setInterval(rightbtn,2000)
                    })
                    // 点击小圆点业务
                    $circle.click(function(){
                        nowing = $(this).index()
                        dong()
                    })
                 function dong(){
                     // 先让fadecover淡入，让全局变白 
                  $fadeCover.fadeIn(fadeIntime,function(){
                    // ,function(){
                    // 回调函数中，就表示fadecover淡入后做的事情。
                    // 换图是干蹦的，不是淡入淡出的换,进行暗箱操作，兄弟去cur，自己加cur
                    $imglis.eq(nowing).addClass('cur').siblings().removeClass('cur')
                    // 淡出让黑布小事
                    $(this).fadeOut(fadeOutime)
                  })
                  $circle.eq(nowing).addClass("cur").siblings().removeClass("cur")
                 }

    })
</script>
</head>
<body>
<div th:insert="head.html"></div>



<div align="center">
	<div class="panel panel-primary" style="width:600px" align="left">
		<div class="panel-heading" >
			<h1>注册</h1>
		</div>
		<div class="panel-body">
			<span style="color: red" th:text="${msg}"></span>
			<form class="form-register met-form" method="post" action="/registerController/registerUser">

				<div class="form-group">
					<div class="input-group">
						<span class="input-group-addon"><i class="fa fa-user"></i></span>
						<input type="text" name="userName" required class="form-control" placeholder="会员名"
							   data-bv-remote="true"
							   data-bv-remote-url=""
							   data-bv-remote-message="用户名已存在"

							   data-bv-notempty="true"
							   data-bv-notempty-message="此项不能为空"

							   data-bv-stringlength="true"
							   data-bv-stringlength-min="2"
							   data-bv-stringlength-max="30"
							   data-bv-stringlength-message="用户名必须在2-30个字符之间"
						/>

					</div>
				</div>


				<div class="form-group">
					<div class="input-group">
						<span class="input-group-addon"><i class="fa fa-unlock-alt"></i></span>
						<input type="password" name="userPassword" required class="form-control" placeholder="密码"
							   data-bv-notempty="true"
							   data-bv-notempty-message="此项不能为空"

							   data-bv-identical="true"
							   data-bv-identical-field="confirmpassword"
							   data-bv-identical-message="两次密码输入不一致"

							   data-bv-stringlength="true"
							   data-bv-stringlength-min="6"
							   data-bv-stringlength-max="30"
							   data-bv-stringlength-message="密码必须在6-30个字符之间"
						>
					</div>
				</div>

				<div class="form-group">
					<div class="input-group">
						<span class="input-group-addon"><i class="fa fa-unlock-alt"></i></span>
						<input type="password" name="userPasswords" required data-password="password" class="form-control" placeholder="重复密码"


							   data-bv-identical="true"
							   data-bv-identical-field="userPasswords"
							   data-bv-identical-message="两次密码输入不一致"
							   data-bv-notempty-message="此项不能为空"
						>

					</div>
				</div>


				<div class="form-group">
					<div class="input-group">
						<span class="input-group-addon"><i class="fa fa-unlock-alt"></i></span>
						<input type="text" name="userRealName" required class="form-control" placeholder="真实姓名"
							   data-bv-notempty="true"
							   data-bv-notempty-message="此项不能为空"
						>
					</div>
				</div>


				<div class="form-group">
					<div class="input-group">
						<span class="input-group-addon"><i class="fa fa-unlock-alt"></i></span>
						<input type="text" name="userEmail" required class="form-control" placeholder="邮箱"
							   data-bv-notempty="true"
							   data-bv-notempty-message="此项不能为空"
						>
					</div>
				</div>


				<div class="form-group">
					<span class="input-group-addon"><i class="fa fa-unlock-alt"></i></span>
					<input type="text" name="userHeadPic" id="userHeadPic" required class="form-control" placeholder="图片" >
					<input type="file"  id="myFile" name="myFile" multiple >
				</div>

				<div class="form-group">
					<div class="input-group">

						<select id="tpAreaId1" onchange="findByAreaPId(this.value)">
							<option value="-1">-请选择-</option>
							<option th:each="area:${areaList}" th:value="${area.areaId}">[[${area.areaName}]]</option>
						</select>
						<div id="tpAreaId2">

						</div>
						<div id="tpAreaId3">

						</div>
						<br><br>
					</div>
				</div>
				<div>
					<select name="userSex">
						<option value="1">男</option>
						<option value="2">女</option>
					</select>
				</div>
				<div class="form-group">
					<div class="input-group">
						<span class="input-group-addon"><i class="fa fa-unlock-alt"></i></span>
						<input type="date" name="userBirthday" required class="form-control" placeholder="生日"
						>
					</div>
				</div>


				<div class="row login_code">
					<div class="col-xs-8">
						<div class="form-group">
							<div class="input-group">
								<span class="input-group-addon"><i class="fa fa-shield"></i></span>
								<input type="text" name="userPhone" id="userPhone" required class="form-control" placeholder="手机号码"

									   data-bv-notempty="true"
									   data-bv-notempty-message="此项不能为空"
								><a href="javascript:buttonTime()" id="btn">发送验证码</a>
							</div>
						</div>
					</div>

				</div>
				<div class="row login_code">
					<div class="col-xs-8">
						<div class="form-group">
							<div class="input-group">
								<span class="input-group-addon"><i class="fa fa-shield"></i></span>
								<input type="text" name="code" required class="form-control" placeholder="验证码"

									   data-bv-notempty="true"
									   data-bv-notempty-message="此项不能为空"
								>
							</div>
						</div>
					</div>
					<div class="col-xs-4 login_code_img">
						<span>填写短信验证码</span>
					</div>
				</div>

				<button class="btn btn-lg btn-primary btn-block" type="submit">立即注册</button>
				<div class="login_link"><a href="/loginController/login">已有账号？</a></div>
			</form>
		</div>
		<div class="panel-footer">
			<a href="#"></a>
		</div>
	</div>
</div>
<script type="text/javascript" src="/static/js/fileinput.js"></script>
<script type="text/javascript">

	$('#myFile').fileinput({
		language: 'zh',
		uploadUrl: "/file/upLoadFile",
		browseClass: 'btn btn-primary',
		allowedFileExtensions: ['jpg','gif','png','xls','xlsx'], //允许上传类型
		maxFileSize: 2048,
		maxFileCount: 2,
		enctype: "multipart/form-data"
	});
	$('#myFile').on('fileuploaded',function(event, data, previewId, index){
		console.log(data.response.imgUrl)
		if (data.response != null) {
			$("#userHeadPic").val(data.response.imgUrl);
		}
	})


	function findByAreaPId(pid) {
		$.ajax({
			url: "/registerController/findByAreaPId",
			data: {areaPid:pid},
			type: "post",
			dataType: "json",
			async: false,
			success: function (result) {
				var arealist = result.data;
				console.log(arealist)
				var div = "<select onchange=\"findByAreaPid3(this.value)\"><option>-请选择-</option></option>";
				for (var i = 0; i < arealist.length; i++) {
					div += "<option value='"+arealist[i].areaId+"'>"+arealist[i].areaName+"</option>";
				}
				div += "</select>";
				console.log(div)
				$("#tpAreaId2").html(div);
			},
			error: function () {
				toastr.error("系统错误");
			}
		});
	}

	function findByAreaPid3(pid) {
		$.ajax({
			url: "/registerController/findByAreaPId",
			data: {areaPid:pid},

			type: "post",
			dataType: "json",
			async: false,
			success: function (result) {
				var arealist = result.data;
				console.log(arealist)
				var div = "<select name='pubsAreaId' ><option>-请选择-</option></option>";
				for (var i = 0; i < arealist.length; i++) {
					div += "<option name='userCity' value='"+arealist[i].areaId+"'>"+arealist[i].areaName+"</option>";
				}
				div += "</select>";
				console.log(div)
				$("#tpAreaId3").html(div);
			},
			error: function () {
				toastr.error("系统错误");
			}
		});
	}

	function buttonTime() {
		$.ajax({
			url:"/registerController/sendSms",
			type:"post",
			data:{userPhone:$("#userPhone").val()},
			dataType:"json",
			success:function (result) {

			}
		})
	}


</script>

<div class="footer">
    <div class="navfoot">
   <ul>
       <li><a href="#">关于我们</a></li>
       <li><a href="#">营销服务</a></li>
       <li><a href="#">商家服务</a></li>
       <li><a href="#">新手上路</a></li>
       <li><a href="#">合作伙伴</a></li>
       <li><a href="#">关注我们</a></li>
   </ul>
   </div>
    <div class="share">
        <span class="s1"></span>
        <span class="s2"></span>
        <span class="s3"></span>
        <span class="s4"></span>
    </div>
    <div class="cl"></div>
     <p>版权所有&copy;2019 FREE TRAVEL北京东途网有限公司</p>
    <p>京ICP备11099888号 京公网安备1101888888</p>
</div>
<!-- topback -->

<script src="/static/js/seajs.js"></script>
<script>
	var pub = '',
		tem = '',
		page_type = 'register';
	seajs.config({
	  paths: {
		'pub': pub.substring(0,pub.length-1),
		'tem': tem.substring(0,tem.length-1)
	  },
	  alias: {
		"jquery": "/jquery_seajs.js"
	  }
	});
	//seajs.use("tem/js/own"); //载入入口模块
	
	
	
	//定义定时器
	var oBtn = document.getElementById('btn');
	var flag = true;

	oBtn.addEventListener("click", function () {
		var time = 60;
		oBtn.classList.add('disable');
		oBtn.innerText = '已发送';

		if (flag) {
			flag = false;
			var timer = setInterval(() => {
				time--;
			oBtn.innerText = time + ' 秒';
			if (time === 0) {
				clearInterval(timer);
				oBtn.innerText = '重新获取';
				oBtn.classList.remove('disable');
				flag = true;
			}
		}, 1000)
		}
	});



</script>
</body>
</html>